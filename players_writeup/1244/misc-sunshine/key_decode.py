# https://github.com/moonlight-stream/moonlight-qt/blob/e44d097683ceebf4e290cf603da48f2710367336/app/streaming/input/keyboard.cpp#L433
# https://github.com/klange/SDL/blob/master/include/SDL_keysym.h
sdlk_mapping = {8: "BACKSPACE", 9: "TAB", 12: "CLEAR", 13: "RETURN", 19: "PAUSE", 27: "ESCAPE", 32: "SPACE", 33: "EXCLAIM", 34: "QUOTEDBL", 35: "HASH", 36: "DOLLAR", 38: "AMPERSAND", 39: "QUOTE", 40: "LEFTPAREN", 41: "RIGHTPAREN", 42: "ASTERISK", 43: "PLUS", 44: "COMMA", 45: "MINUS", 46: "PERIOD", 47: "SLASH", 48: "0", 49: "1", 50: "2", 51: "3", 52: "4", 53: "5", 54: "6", 55: "7", 56: "8", 57: "9", 58: "COLON", 59: "SEMICOLON", 60: "LESS", 61: "EQUALS", 62: "GREATER", 63: "QUESTION", 64: "AT", 91: "LEFTBRACKET", 92: "BACKSLASH", 93: "RIGHTBRACKET", 94: "CARET", 95: "UNDERSCORE", 96: "BACKQUOTE", 97: "a", 98: "b", 99: "c", 100: "d", 101: "e", 102: "f", 103: "g", 104: "h", 105: "i", 106: "j", 107: "k", 108: "l", 109: "m", 110: "n", 111: "o", 112: "p", 113: "q", 114: "r", 115: "s", 116: "t", 117: "u", 118: "v", 119: "w", 120: "x", 121: "y", 122: "z", 127: "DELETE", 161: "WORLD_1"}
# Extract all (KeyCode, Modifier) in the log and fill them here
keys = [(0x8074, 0x00), (0x8053, 0x00), (0x8048, 0x00), (0x8049, 0x00), (0x8046, 0x00), (0x8055, 0x00), (0x8020, 0x00), (0x8050, 0x00), (0x8059, 0x00), (0x800D, 0x00), (0x804D, 0x00), (0x8041, 0x00), (0x8020, 0x00), (0x80A1, 0x01), (0x80BF, 0x01), (0x800D, 0x00), (0x8032, 0x00), (0x8048, 0x00), (0x8045, 0x00), (0x8020, 0x00), (0x8033, 0x00), (0x8042, 0x00), (0x8041, 0x00), (0x8020, 0x00), (0x800D, 0x00), (0x8044, 0x00), (0x8041, 0x00), (0x8047, 0x00), (0x8045, 0x00), (0x8020, 0x00), (0x8057, 0x00), (0x804F, 0x00), (0x8053, 0x00), (0x8020, 0x00), (0x8058, 0x00), (0x8055, 0x00), (0x8045, 0x00), (0x8053, 0x00), (0x8048, 0x00), (0x8045, 0x00), (0x804E, 0x00), (0x8047, 0x00), (0x8020, 0x00), (0x80BC, 0x00), (0x8059, 0x00), (0x8049, 0x00), (0x8047, 0x00), (0x8045, 0x00), (0x8020, 0x00), (0x8058, 0x00), (0x8049, 0x00), (0x804E, 0x00), (0x8047, 0x00), (0x8042, 0x00), (0x8055, 0x00), (0x8020, 0x00), (0x80A1, 0x01), (0x80BF, 0x01), (0x800D, 0x00), (0x8046, 0x00), (0x804C, 0x00), (0x8041, 0x00), (0x8047, 0x00), (0x80A0, 0x01), (0x80DB, 0x01), (0x804F, 0x00), (0x804E, 0x00), (0x804C, 0x00), (0x8059, 0x00), (0x8041, 0x00), (0x8050, 0x00), (0x8050, 0x00), (0x804C, 0x00), (0x8045, 0x00), (0x8043, 0x00), (0x8041, 0x00), (0x804E, 0x00), (0x8044, 0x00), (0x804F, 0x00), (0x80A0, 0x01), (0x80DD, 0x01), (0x800D, 0x00), (0x8044, 0x00), (0x8045, 0x00), (0x804E, 0x00), (0x8047, 0x00), (0x8058, 0x00), (0x8049, 0x00), (0x8041, 0x00), (0x8020, 0x00), (0x800D, 0x00), (0x8059, 0x00), (0x804F, 0x00), (0x8055, 0x00), (0x804E, 0x00), (0x8045, 0x00), (0x8049, 0x00), (0x8047, 0x00), (0x8055, 0x00), (0x8049, 0x00), (0x8020, 0x00), (0x800D, 0x00), (0x8048, 0x00), (0x8041, 0x00), (0x804F, 0x00), (0x8044, 0x00), (0x8045, 0x00), (0x8020, 0x00), (0x8048, 0x00), (0x8041, 0x00), (0x804F, 0x00), (0x8044, 0x00), (0x8020, 0x00), (0x800D, 0x00)]

keys_list = [(x[0] - 0x8000, x[1]) for x in keys]
def proc_sdlk(x):
    if 65 <= x <= 90:
        return chr(x)
    elif x > 127:
        return "(WORLD_%d)"%(x - 127)
    else:
        return sdlk_mapping[x] if len(sdlk_mapping[x]) == 1 else "(%s)"%(sdlk_mapping[x])
mapping = lambda x: proc_sdlk(x[0]) if x[1] == 0x00 else "(%d+%s)"%(x[1], proc_sdlk(x[0]))
print("".join([mapping(x) for x in keys_list]))
